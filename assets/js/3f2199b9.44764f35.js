"use strict";(self.webpackChunkcourse=self.webpackChunkcourse||[]).push([[132],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return m}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(t),m=r,k=u["".concat(s,".").concat(m)]||u[m]||d[m]||i;return t?a.createElement(k,o(o({ref:n},p),{},{components:t})):a.createElement(k,o({ref:n},p))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=t[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},1649:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return u}});var a=t(7462),r=t(3366),i=(t(7294),t(3905)),o=["components"],l={sidebar_position:1},s="Zilliqa Javascript Library",c={unversionedId:"zilliqa-js/javascript",id:"zilliqa-js/javascript",isDocsHomePage:!1,title:"Zilliqa Javascript Library",description:"Zilliqa has a Javascript SDK library which wraps the Zilliqa API to allow developers to communicate with the blockchain in a convenience manner when developing DApps.",source:"@site/docs/zilliqa-js/javascript.md",sourceDirName:"zilliqa-js",slug:"/zilliqa-js/javascript",permalink:"/docs/zilliqa-js/javascript",editUrl:"https://github.com/teye/zilliqa-tldr-dapp-course/docs/zilliqa-js/javascript.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Zilliqa API",permalink:"/docs/zilliqa-js/api"},next:{title:"Integrating Zilliqa with React",permalink:"/docs/react/react_zilliqa"}},p=[{value:"Deploy Contract on Testnet",id:"deploy-contract-on-testnet",children:[{value:"Example",id:"example",children:[],level:4}],level:2},{value:"Call Transition",id:"call-transition",children:[],level:2},{value:"Fetch Contract State",id:"fetch-contract-state",children:[],level:2},{value:"Exercises",id:"exercises",children:[],level:2}],d={toc:p};function u(e){var n=e.components,t=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"zilliqa-javascript-library"},"Zilliqa Javascript Library"),(0,i.kt)("p",null,"Zilliqa has a Javascript SDK library which wraps the Zilliqa API to allow developers to communicate with the blockchain in a convenience manner when developing DApps."),(0,i.kt)("p",null,"In this section, we will cover how to deploy a contract with Zilliqa-JS, how to call a transition and lastly how to fetch contract state."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Zilliqa/Zilliqa-JavaScript-Library"},"https://github.com/Zilliqa/Zilliqa-JavaScript-Library")," for more information and installation instructions."),(0,i.kt)("h2",{id:"deploy-contract-on-testnet"},"Deploy Contract on Testnet"),(0,i.kt)("p",null,"A Scilla contract can be deployed via ",(0,i.kt)("a",{parentName:"p",href:"https://ide.zilliqa.com"},"Neo-Savant IDE")," and also Zilliqa JS."),(0,i.kt)("h4",{id:"example"},"Example"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const { bytes, validation, BN, Long, units } = require('@zilliqa-js/util');\nconst {\n    toBech32Address,\n    getAddressFromPrivateKey,\n  } = require('@zilliqa-js/crypto');\nconst { Zilliqa } = require('@zilliqa-js/zilliqa');\nconst fs = require('fs');\n\nasync function main() {\n\n    let api = 'https://dev-api.zilliqa.com';\n    const privateKey = '<wallet-privatekey>';\n\n    const zilliqa = new Zilliqa(api);\n    zilliqa.wallet.addByPrivateKey(privateKey);\n    const address = getAddressFromPrivateKey(privateKey);\n    const myGasPrice = units.toQa('2000', units.Units.Li);\n\n    try {\n        const networkId = await zilliqa.network.GetNetworkId();\n        console.log(\"networkid: %o\", networkId.result);\n\n        const VERSION = bytes.pack(parseInt(networkId.result), 1);\n\n        // deploy impl\n        const implCode = fs.readFileSync(__dirname + '/./demo.scilla', 'utf-8');\n        const init = [\n            {\n                vname: '_scilla_version',\n                type: 'Uint32',\n                value: '0',\n            },\n            {\n                vname: 'contract_owner',\n                type: 'ByStr20',\n                value: `${address}`,\n            },\n        ];\n        const implContract = zilliqa.contracts.new(implCode, init);\n        const [deployedTx, implState] = await implContract.deploy(\n            {\n                version: VERSION,\n                gasPrice: myGasPrice,\n                gasLimit: Long.fromNumber(30000),\n            },\n            33,\n            1000,\n            false,\n        );\n        console.log(JSON.stringify(deployedTx, null, 4))\n        console.log(\"contract address: %o\", implState.address);\n    } catch (err) {\n        console.error(err);\n    }\n}\n\nmain();\n")),(0,i.kt)("p",null,"In the above example, we import the ",(0,i.kt)("inlineCode",{parentName:"p"},"Zilliqa")," module and declare a new ",(0,i.kt)("inlineCode",{parentName:"p"},"Zilliqa")," object. Next, we set the api to testnet and add a private key to the wallet. The private key is necessary as we are going to deploy a contract."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const { bytes, validation, BN, Long, units } = require('@zilliqa-js/util');\nconst {\n    toBech32Address,\n    getAddressFromPrivateKey,\n  } = require('@zilliqa-js/crypto');\nconst { Zilliqa } = require('@zilliqa-js/zilliqa');\n\nlet api = 'https://dev-api.zilliqa.com';\nconst privateKey = '<wallet-privatekey>';\nconst zilliqa = new Zilliqa(api);\nzilliqa.wallet.addByPrivateKey(privateKey);\n")),(0,i.kt)("p",null,"Next, we fetch the current network ID (chain ID) and generate the ",(0,i.kt)("inlineCode",{parentName:"p"},"VERSION")," parameter. This is required later as part of the contract deployment parameters."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'    try {\n        const networkId = await zilliqa.network.GetNetworkId();\n        console.log("networkid: %o", networkId.result);\n\n        const VERSION = bytes.pack(parseInt(networkId.result), 1);\n\n        // ...\n    } catch (err) {\n        console.error(err);\n    }\n')),(0,i.kt)("p",null,"Next, we read the Scilla contract code and also declare the initial parameters. The initial parameters consists of the ",(0,i.kt)("inlineCode",{parentName:"p"},"_scilla_version")," which is a mandatory field and any immutable fields as defined in the contract file."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"    try {\n        // ...\n\n        // deploy impl\n        const implCode = fs.readFileSync(__dirname + '/./demo.scilla', 'utf-8');   // file path to the contract file\n\n        const init = [\n            {\n                vname: '_scilla_version',    // mandatory scilla version; always 0\n                type: 'Uint32',\n                value: '0',\n            },\n            {\n                vname: 'contract_owner',     // immutable field as defined by the demo.scilla\n                type: 'ByStr20',\n                value: `${address}`,\n            },\n        ];\n\n        // ...\n    } catch (err) {\n        console.error(err);\n    }\n")),(0,i.kt)("p",null,"Next, we invoke ",(0,i.kt)("inlineCode",{parentName:"p"},"zilliqa.contracts.new(implCode, init)")," to create a contract object from our Scilla code and initial parameters. Finally, we deploy the contract on testnet by using this contract object and calling ",(0,i.kt)("inlineCode",{parentName:"p"},"implContract.deploy"),". The ",(0,i.kt)("inlineCode",{parentName:"p"},"deploy")," is invoked with the ",(0,i.kt)("inlineCode",{parentName:"p"},"VERSION"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"gasPrice")," and also the ",(0,i.kt)("inlineCode",{parentName:"p"},"gasLimit"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},'    try {\n\n        // not shown - fetch network id\n\n        // not shown - version\n\n        // not shown - read scilla contract\n\n        // not shown - init params\n\n        const implContract = zilliqa.contracts.new(implCode, init);\n        \n        const [deployedTx, implState] = await implContract.deploy(\n            {\n                version: VERSION,\n                gasPrice: myGasPrice,\n                gasLimit: Long.fromNumber(30000),\n            },\n            33,    // try max 33 attempts\n            1000,  // delay per try\n            false, // whether to send the transaction to DS-block, // usually false unless contract is a proxy contract\n        );\n\n        console.log(JSON.stringify(deployedTx, null, 4))\n\n        console.log("contract address: %o", implState.address);\n    } catch (err) {\n        console.error(err);\n    }\n')),(0,i.kt)("p",null,"The result is displayed via ",(0,i.kt)("inlineCode",{parentName:"p"},"console.log(JSON.stringify(deployedTx, null, 4))")," and the deployed contract address is outputed. "),(0,i.kt)("h2",{id:"call-transition"},"Call Transition"),(0,i.kt)("p",null,"To invoke a transition using Zilliqa JS, the schematics is quite similar to deploying a contract. We need to import and declare the ",(0,i.kt)("inlineCode",{parentName:"p"},"Zilliqa")," object, set a network and private key. We also need to set the deployed contract address. Then, we fetch the network ID anc craft the ",(0,i.kt)("inlineCode",{parentName:"p"},"VERSION")," parameter. Then, we craft the transition parameters and invoke it."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const { bytes, validation, BN, Long, units } = require('@zilliqa-js/util');\nconst {\n    toBech32Address,\n    getAddressFromPrivateKey,\n  } = require('@zilliqa-js/crypto');\nconst { Zilliqa } = require('@zilliqa-js/zilliqa');\n\n\nasync function main() {\n    let api = 'https://dev-api.zilliqa.com';\n    const privateKey = '<wallet-privatekey>';\n\n    const myContractAddr = '0x_base16_address';\n    \n    const zilliqa = new Zilliqa(api);\n    zilliqa.wallet.addByPrivateKey(privateKey);\n    const myGasPrice = units.toQa('2000', units.Units.Li);\n\n    try {\n        const networkId = await zilliqa.network.GetNetworkId();\n        console.log(\"networkid: %o\", networkId.result);\n\n        const VERSION = bytes.pack(parseInt(networkId.result), 1);\n\n        const contract = zilliqa.contracts.at(myContractAddr);\n        const callTx = await contract.call(\n            'Mint',\n            [\n                {\n                    vname: \"to\",\n                    type: \"ByStr20\",\n                    value: `${address}`,\n                },\n                {\n                    vname: \"token_uri\",\n                    type: \"String\",\n                    value: `https://example.token.com/1`,\n                },\n            ],\n            {\n                version: VERSION,\n                amount: new BN(0),\n                gasPrice: myGasPrice,\n                gasLimit: Long.fromNumber(10000),\n            },\n            33,\n            1000,\n            false\n        );\n        console.log(JSON.stringify(callTx, null, 4));\n    } catch (err) {\n        console.error(err);\n    }\n}\n\nmain();\n")),(0,i.kt)("p",null,"In the above example, we invoked the ",(0,i.kt)("inlineCode",{parentName:"p"},"Mint(to, token_uri)")," transition. You can observe that in order to call a transition in Zilliqa JS, we need to craft each of the parameter name and type. It is more verbose than calling a transition using Neo-Savant IDE."),(0,i.kt)("h2",{id:"fetch-contract-state"},"Fetch Contract State"),(0,i.kt)("p",null,"To fetch a contract state, we are going to use ",(0,i.kt)("a",{parentName:"p",href:"https://dev.zilliqa.com/docs/apis/api-contract-get-smartcontract-substate"},(0,i.kt)("inlineCode",{parentName:"a"},"GetSmartContractSubState"))," as it is more specific and hence faster."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const { Zilliqa } = require('@zilliqa-js/zilliqa');\n\nasync function main() {\n    const zilliqa = new Zilliqa('https://dev-api.zilliqa.com');\n    const myContractAddress = '0x_base16_address';\n\n    const owners = await zilliqa.blockchain.getSmartContractSubState(\n        `${myContractAddress}`,\n        'token_owners',\n    );\n\n    console.log(\"Owners: \", JSON.stringify(owners, null, 4));\n}\n\nmain()\n")),(0,i.kt)("p",null,"In the above example, we import and declare a new ",(0,i.kt)("inlineCode",{parentName:"p"},"Zilliqa")," object. We do not need to add a private key as we are going to fetch data and not deploying contract or calling transitions. Next, we defined the network and the deployed contract address. The contract address shoud be a Base16 address. The ",(0,i.kt)("inlineCode",{parentName:"p"},"0x")," portion is omitted as the SDK does not seem to accept the ",(0,i.kt)("inlineCode",{parentName:"p"},"0x")," prefix."),(0,i.kt)("p",null,"Next we invoke ",(0,i.kt)("inlineCode",{parentName:"p"},"zilliqa.blockchain.getSmartContractSubState")," to fetch the ",(0,i.kt)("inlineCode",{parentName:"p"},"token_owners")," mutable field from the deployed contract address. The ",(0,i.kt)("inlineCode",{parentName:"p"},"zilliqa.blockchain.getSmartContractSubState")," call is a wrapper around the Zilliqa API- ",(0,i.kt)("inlineCode",{parentName:"p"},"GetSmartContractSubState"),". Once the promise is fulfiled, the owners result is returned."),(0,i.kt)("h2",{id:"exercises"},"Exercises"),(0,i.kt)("p",null,"The following are some exercises to help you be familiar with Zilliqa JS."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Instructions")),(0,i.kt)("p",null,"Download these ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/teye/zilliqa-tldr-dapp-course/tree/main/exercises/chapter2"},"files")," into a folder."),(0,i.kt)("br",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Task 1: Deploy a Contract")),(0,i.kt)("p",null,"For this task, we are going to deploy a ",(0,i.kt)("inlineCode",{parentName:"p"},"Cryptomon")," contract using Zilliqa JS."),(0,i.kt)("p",null,"Download the required fileds and open up ",(0,i.kt)("inlineCode",{parentName:"p"},"deploy.js"),"."),(0,i.kt)("p",null,"Edit the ",(0,i.kt)("inlineCode",{parentName:"p"},"privateKey")," to your own wallet private key:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"let api = 'https://dev-api.zilliqa.com';\nconst privateKey = 'wallet-privatekey';\n\nconst zilliqa = new Zilliqa(api);\n")),(0,i.kt)("p",null,"Open a terminal, change to the ",(0,i.kt)("strong",{parentName:"p"},"chapter2")," folder, execute these statements to deploy the contract, wait for it to complete: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"npm install\nnode deploy.js\n")),(0,i.kt)("p",null,"Your output should look something like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'networkid: \'333\'\n{\n    "code": "scilla_version 0\\n\\n(***************************************************)\\n(*               Associated library                *)\\n(***************************************************)\\nlibrary CryptoMon\\n\\n(* Global variables *)\\nlet zero = Uint256 0\\nlet one = Uint256 1\\n\\n(***************************************************)\\n(*             The contract definition             *)\\n(***************************************************)\\n\\ncontract CryptoMon\\n(\\n    contract_owner: ByStr20\\n)\\n\\n(* Mutable fields *)\\nfield owner: ByStr20 = contract_owner\\n\\nfield token_owners: Map Uint256 ByStr20 = Emp Uint256 ByStr20\\n\\n\\n(* @dev: Add new item *)\\ntransition AddCryptoMon(token_id: Uint256, address: ByStr20)\\n  token_owners[token_id] := address;\\n  e = {\\n    _eventname : \\"AddCryptoMon\\";\\n    token_id: token_id;\\n    owner: address\\n  };\\n  event e\\nend\\n\\n(* @dev: Delete exisitng item *)\\ntransition DeleteCryptoMon(token_id: Uint256)\\n  delete token_owners[token_id];\\n  e = {\\n    _eventname : \\"DeleteCryptoMon\\";\\n    token_id: token_id\\n  };\\n  event e\\nend\\n",\n    "data": "[{\\"vname\\":\\"_scilla_version\\",\\"type\\":\\"Uint32\\",\\"value\\":\\"0\\"},{\\"vname\\":\\"contract_owner\\",\\"type\\":\\"ByStr20\\",\\"value\\":\\"0x<your_wallet_address>\\"}]",\n    "version": 21823489,\n    "toAddr": "0x0000000000000000000000000000000000000000",\n    "nonce": 30,\n    "pubKey": "<public_key>",\n    "amount": "0",\n    "signature": "<signature>",\n    "gasPrice": "77359400",\n    "gasLimit": {\n        "low": 30000,\n        "high": 0,\n        "unsigned": false\n    },\n    "receipt": {\n        "cumulative_gas": 401,\n        "epoch_num": "3582320",\n        "success": true\n    },\n    "provider": {\n        "middleware": {\n            "request": {},\n            "response": {}\n        },\n        "nodeURL": "https://dev-api.zilliqa.com",\n        "reqMiddleware": {},\n        "resMiddleware": {}\n    },\n    "status": 2,\n    "toDS": false,\n    "blockConfirmation": 0,\n    "eventEmitter": {\n        "handlers": {},\n        "emitter": {},\n        "promise": {}\n    },\n    "id": "<transaction_hash>"\n}\ncontract address: \'0x<contract_address>\'\n')),(0,i.kt)("p",null,"Take note of the contract address, it would be used for later tasks."),(0,i.kt)("br",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Task 2: Call a Transition")),(0,i.kt)("p",null,"For this task, we are going to call the ",(0,i.kt)("inlineCode",{parentName:"p"},"AddCryptoMon(1, <your-wallet-address>)")," transition on our deployed contract using Zilliqa JS."),(0,i.kt)("p",null,"Download the required fileds and open up ",(0,i.kt)("inlineCode",{parentName:"p"},"call.js"),"."),(0,i.kt)("p",null,"Edit the ",(0,i.kt)("inlineCode",{parentName:"p"},"privateKey")," to your own wallet private key and ",(0,i.kt)("inlineCode",{parentName:"p"},"cryptomonAddr")," to the deployed contract address from ",(0,i.kt)("strong",{parentName:"p"},"Task 1"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const privateKey = '<wallet-privatekey>';\nconst tokenId = '1';\n\nconst cryptomonAddr = '0x<contract_addr>';\n")),(0,i.kt)("p",null,"Open a terminal, change to the ",(0,i.kt)("strong",{parentName:"p"},"chapter2")," folder, execute this to call ",(0,i.kt)("inlineCode",{parentName:"p"},"AddCryptoMon"),", wait for it to complete: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"node call.js\n")),(0,i.kt)("p",null,"Your output should look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'networkid: \'333\'\n{\n    "code": "",\n    "data": "{\\"_tag\\":\\"AddCryptoMon\\",\\"params\\":[{\\"vname\\":\\"token_id\\",\\"type\\":\\"Uint256\\",\\"value\\":\\"1\\"},{\\"vname\\":\\"address\\",\\"type\\":\\"ByStr20\\",\\"value\\":\\"0x<wallet_address>\\"}]}",\n    "version": 21823489,\n    "toAddr": "0x<contract_address>",\n    "nonce": 32,\n    "pubKey": "<public_key>",\n    "amount": "0",\n    "signature": "<transaction_signature>",\n    "gasPrice": "77359400",\n    "gasLimit": {\n        "low": 10000,\n        "high": 0,\n        "unsigned": false\n    },\n    "receipt": {\n        "accepted": false,\n        "cumulative_gas": 368,\n        "epoch_num": "3582369",\n        "event_logs": [\n            {\n                "_eventname": "AddCryptoMon",\n                "address": "0x<contract_address>",\n                "params": [\n                    {\n                        "type": "Uint256",\n                        "value": "1",\n                        "vname": "token_id"\n                    },\n                    {\n                        "type": "ByStr20",\n                        "value": "0x<wallet_address>",\n                        "vname": "owner"\n                    }\n                ]\n            }\n        ],\n        "success": true\n    },\n    "provider": {\n        "middleware": {\n            "request": {},\n            "response": {}\n        },\n        "nodeURL": "https://dev-api.zilliqa.com",\n        "reqMiddleware": {},\n        "resMiddleware": {}\n    },\n    "status": 2,\n    "toDS": false,\n    "blockConfirmation": 0,\n    "eventEmitter": {\n        "handlers": {},\n        "emitter": {},\n        "promise": {}\n    },\n    "id": "<transaction_hash>"\n}\n')),(0,i.kt)("p",null,"Open the file and observe how the transition parameters are crafted when comparing it to the contract code."),(0,i.kt)("br",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Task 3: Fetch Contract State")),(0,i.kt)("p",null,"In Task 1, we deployed a sample ",(0,i.kt)("inlineCode",{parentName:"p"},"Cryptomon")," contract. In Task 2, we called ",(0,i.kt)("inlineCode",{parentName:"p"},"AddCryptoMon")," to create ",(0,i.kt)("inlineCode",{parentName:"p"},"token_id")," 1 into our own wallet."),(0,i.kt)("p",null,"For this task, we are going to fetch a ",(0,i.kt)("inlineCode",{parentName:"p"},"token_owners")," mutable field from our deployed contract using Zilliqa JS."),(0,i.kt)("p",null,"Download the required fileds and open up ",(0,i.kt)("inlineCode",{parentName:"p"},"fetch.js"),"."),(0,i.kt)("p",null,"Edit ",(0,i.kt)("inlineCode",{parentName:"p"},"cryptomonAddr")," to point to your deployed contract address."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-javascript"},"const zilliqa = new Zilliqa('https://dev-api.zilliqa.com');\nconst cryptomonAddr = '0x_contract_address';\n")),(0,i.kt)("p",null,"Open a terminal, change to the ",(0,i.kt)("strong",{parentName:"p"},"chapter2")," folder, execute this fetch ",(0,i.kt)("inlineCode",{parentName:"p"},"token_owners"),", wait for it to complete: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"node fetch.js\n")),(0,i.kt)("p",null,"Your output should look like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'token owners:  {\n    "id": 1,\n    "jsonrpc": "2.0",\n    "result": {\n        "token_owners": {\n            "1": "0x<wallet_address>"\n        }\n    },\n    "req": {\n        "url": "https://dev-api.zilliqa.com",\n        "payload": {\n            "id": 1,\n            "jsonrpc": "2.0",\n            "method": "GetSmartContractSubState",\n            "params": [\n                "<contract_address>",\n                "token_owners",\n                []\n            ]\n        }\n    }\n}\n')),(0,i.kt)("p",null,"That's it for these exercises!"),(0,i.kt)("p",null,"To learn more, you may edit ",(0,i.kt)("inlineCode",{parentName:"p"},"call.js"),"'s ",(0,i.kt)("inlineCode",{parentName:"p"},"tokenId")," variable and execute ",(0,i.kt)("inlineCode",{parentName:"p"},"AddCryptoMon"),". After which, call ",(0,i.kt)("inlineCode",{parentName:"p"},"fetch.js")," and observe the ",(0,i.kt)("inlineCode",{parentName:"p"},"token_owners")," field. Try it out and experiment! You may also edit ",(0,i.kt)("inlineCode",{parentName:"p"},"call.js")," to call ",(0,i.kt)("inlineCode",{parentName:"p"},"DeleteCryptoMon"),"!"))}u.isMDXComponent=!0}}]);